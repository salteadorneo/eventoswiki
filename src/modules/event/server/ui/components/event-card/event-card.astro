---
import { Card, CardContent, CardHeader, CardTitle } from '@ui/components/common/card/card.component'
import { Calendar, MapPin, Video } from '@ui/icons'
import { Urls } from '@ui/urls/urls'
import type { Event } from '../../../domain/event'
import EventCategories from '../event-categories/event-categories.astro'

interface Props {
  event: Event
}

const { event } = Astro.props
---

<a
  href={Urls.EVENT(event.getId())}
  aria-label={`Ver detalles del evento ${event.getName()}, ${event.getShortDescription()} serÃ¡ en ${event.getLocation()} el ${event.getPeriodString()}`}
>
  <Card className="event-card">
    <img
      id="event-image"
      class="event-thumbnail"
      src={event.getThumbnail()}
      alt={`Imagen del evento ${event.getName()}`}
      aria-hidden="true"
      loading="lazy"
      onerror="this.src = '/not-found.jpg'"
    />
    <CardHeader className="event-header">
      <EventCategories event={event} />
    </CardHeader>
    <CardContent className="event-content">
      <CardTitle>{event.getName()}</CardTitle>
      <p class="event-description">{event.getShortDescription()}</p>
      <section class="event-info">
        <article class="event-info-item">
          <Calendar className="event-info-icon" />
          <p>
            {event.getPeriodString()}
          </p>
        </article>
        <article class="event-info-item">
          {event.isOnline() ? <Video className="event-info-icon" /> : <MapPin className="event-info-icon" />}
          <p>
            {event.getLocation()}
          </p>
        </article>
      </section>
    </CardContent>
  </Card>

  <style>
    .event-card {
      @apply flex h-full flex-col overflow-hidden transition-shadow duration-300  hover:shadow-lg;
    }

    .event-thumbnail {
      @apply h-56 w-full object-cover;
    }

    .event-header {
      @apply -translate-y-3 p-0 pl-2 lg:pl-4;
    }

    .event-content {
      @apply mt-0 flex flex-1 flex-col gap-4 px-4 pb-4 md:px-6;

      .event-info {
        @apply flex flex-col gap-2 text-card-foreground md:flex-row md:items-center md:justify-between md:gap-4;

        .event-info-icon {
          @apply text-xl md:text-2xl;
        }

        .event-info-item {
          @apply flex items-center gap-1 text-gray-400;

          p {
            @apply text-sm uppercase;
          }
        }
      }

      .event-description {
        @apply line-clamp-3 flex-1 lg:line-clamp-2;
      }
    }
  </style>
</a>
